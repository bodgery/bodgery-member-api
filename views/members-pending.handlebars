<h1>Pending Members</h1>

<div id="msg"></div>

<div id="pending-members">
    <table>
        <tr class="table-header">
            <th>Name</th>
        </tr>
    </table>
</div>


<script>
'use strict';

var pending_div;
var msg_div;

function load_pending()
{
    var url = "/api/v1/members/pending";
    msg_div.text( "Loading . . . " );
    msg_div.show();
    pending_div.hide();

    $.ajax( url, {
        "type": "GET",
        "error": function (jqXHR, str, exception) {
            msg_div.text( "Error fetching pending members: " + str );
        },
        "success": function (data, str, jqXHR) {
            update_table( data );
        }
    });
}

function update_table( data )
{
    $( ".row_data" ).remove();

    data.forEach( function (_) {
        pending_div.append( '<tr class="row_data">'
            + "<td>" + _.first_name + " " + _.last_name + "</td>"
            + "</tr>"
        );
    });

    msg_div.hide();
    pending_div.show();
}

$( document ).ready(function () {
    pending_div = $( "#pending-members" );
    msg_div = $( "#msg" );

    load_pending();
});
</script>
